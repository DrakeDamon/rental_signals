---
title: Tampa Rent Signals - Complete System Architecture
---
graph TB
    %% External Data Sources
    subgraph "ğŸŒ External Data Sources"
        EXT1[ğŸ“Š ApartmentList API<br/>County/Metro Rent Data]
        EXT2[ğŸ  Zillow Research<br/>ZORI Metro Index]
        EXT3[ğŸ›ï¸ Federal Reserve<br/>FRED Economic Data]
    end

    %% Data Collection & Processing
    subgraph "ğŸ“¥ Data Collection Layer"
        SCRIPT1[download_apartmentlist.py<br/>ğŸ”„ API Integration]
        SCRIPT2[zillow_wide_to_long.py<br/>ğŸ“Š Format Transformation]
        SCRIPT3[standardize.py<br/>ğŸ”§ Master ETL Script]
    end

    %% Local Development Storage
    subgraph "ğŸ’» Local Development"
        LOCAL1[data/raw/<br/>ğŸ“ Source-specific folders<br/>ğŸ“… Date-based organization]
        LOCAL2[standardized/<br/>ğŸ“‹ Long-format CSVs<br/>ğŸ¯ Consistent schema]
    end

    %% Cloud Infrastructure
    subgraph "â˜ï¸ AWS Cloud Infrastructure"
        S3[ğŸª£ S3 Bucket<br/>ğŸ” Private & Encrypted<br/>ğŸ“ Date-based prefixes<br/>ğŸ”„ Versioning enabled]
        IAM[ğŸ”‘ IAM Policies<br/>ğŸ‘¤ Least-privilege access<br/>ğŸ”’ Scoped S3 permissions<br/>ğŸ« OIDC for GitHub Actions]
    end

    %% Data Warehouse
    subgraph "ğŸ”ï¸ Snowflake Data Warehouse"
        direction TB
        subgraph "ğŸ¥‰ RAW Schema"
            RAW1[APTLIST_LONG<br/>ğŸ“Š Raw apartment data]
            RAW2[ZORI_METRO_LONG<br/>ğŸ  Raw Zillow data]
            RAW3[FRED_CPI_LONG<br/>ğŸ’° Raw economic data]
        end
        
        subgraph "ğŸ¥ˆ STAGING Schema (dbt)"
            STG1[STG_APTLIST<br/>ğŸ§¹ Cleaned data<br/>ğŸ“Š Quality scoring]
            STG2[STG_ZORI<br/>ğŸ™ï¸ Metro classification<br/>ğŸ” Anomaly detection]
            STG3[STG_FRED<br/>ğŸ“‹ Series validation<br/>â­ Reliability scoring]
        end
        
        subgraph "ğŸ¥ˆ CORE Schema (dbt)"
            SNAP1[SNAP_LOCATION<br/>ğŸ“¸ SCD Type 2 snapshots]
            SNAP2[SNAP_ECONOMIC_SERIES<br/>ğŸ“¸ Historical tracking]
            DIM1[DIM_TIME<br/>ğŸ“… Calendar dimension]
            DIM2[DIM_LOCATION<br/>ğŸ—ºï¸ Geography with history]
            DIM3[DIM_ECONOMIC_SERIES<br/>ğŸ“Š Series metadata]
            DIM4[DIM_DATA_SOURCE<br/>ğŸ“‹ Source reference]
            FACT1[FACT_RENT_ZORI<br/>ğŸ  Zillow rent facts<br/>ğŸ“ˆ Calculated measures]
            FACT2[FACT_RENT_APTLIST<br/>ğŸ¢ ApartmentList facts<br/>ğŸ‘¥ Population analytics]
            FACT3[FACT_ECONOMIC_INDICATOR<br/>ğŸ’° Economic facts<br/>ğŸ“Š Trend analysis]
        end
        
        subgraph "ğŸ¥‡ MARTS Schema (dbt)"
            MART1[MART_RENT_TRENDS<br/>ğŸ”€ Cross-source analysis<br/>ğŸ’¡ Investment insights]
            MART2[MART_MARKET_RANKINGS<br/>ğŸ† Competitiveness scores<br/>ğŸ”¥ Heat mapping]
            MART3[MART_ECONOMIC_CORRELATION<br/>ğŸ’° Rent vs inflation<br/>ğŸ›ï¸ Policy implications]
            MART4[MART_REGIONAL_SUMMARY<br/>ğŸ—ºï¸ State aggregations<br/>ğŸ“ˆ Growth patterns]
            MART5[MART_DATA_LINEAGE<br/>ğŸ” Operational monitoring<br/>ğŸ“Š Quality dashboard]
        end
    end

    %% Analytics Engineering Layer
    subgraph "ğŸ› ï¸ Analytics Engineering"
        DBT[ğŸ”§ dbt Core<br/>ğŸ“Š 15 models<br/>ğŸ”„ SCD Type 2<br/>ğŸ“ˆ Business logic<br/>ğŸ“‹ Documentation]
        GE[ğŸ›¡ï¸ Great Expectations<br/>âœ… 100+ validation rules<br/>ğŸ“Š Layer-specific suites<br/>ğŸš¨ Automated checkpoints<br/>ğŸ“ˆ Data profiling]
    end

    %% Orchestration Layer
    subgraph "âš™ï¸ Dagster Orchestration"
        direction TB
        ASSETS[ğŸ¯ Software-Defined Assets<br/>ğŸ“Š 15 assets total<br/>ğŸ”— Automatic dependencies<br/>ğŸ“Š Metadata tracking]
        CHECKS[ğŸ›¡ï¸ Asset Checks<br/>âœ… 12 validation checks<br/>â° Freshness policies<br/>ğŸš¨ Business rules]
        JOBS[ğŸš€ Pipeline Jobs<br/>ğŸ“… 4 job definitions<br/>ğŸ”„ Dependency management<br/>âš¡ Parallel execution]
        SCHEDULE[â° Automation<br/>ğŸ“… Daily/weekly schedules<br/>ğŸ‘ï¸ Data freshness sensors<br/>ğŸ”„ Event-driven triggers]
    end

    %% Monitoring & Observability
    subgraph "ğŸ“Š Monitoring & Observability"
        DAGSTER_UI[ğŸ–¥ï¸ Dagster UI<br/>ğŸ“Š Asset lineage<br/>ğŸ“ˆ Run monitoring<br/>ğŸ” Check results<br/>ğŸ“‹ Metadata tracking]
        DBT_DOCS[ğŸ“š dbt Docs<br/>ğŸ”— Model lineage<br/>ğŸ“‹ Business glossary<br/>ğŸ§ª Test results]
        GE_DOCS[ğŸ“Š GE Data Docs<br/>âœ… Validation reports<br/>ğŸ“ˆ Data profiling<br/>ğŸ“Š Quality trends]
    end

    %% CI/CD and Development
    subgraph "ğŸ”§ Development & Deployment"
        GITHUB[ğŸ“¦ GitHub Repository<br/>ğŸ”„ Version control<br/>ğŸ¤– Actions CI/CD<br/>ğŸ”‘ OIDC authentication]
        LOCAL_DEV[ğŸ’» Local Development<br/>ğŸ§ª dagster dev<br/>ğŸ”§ dbt development<br/>âœ… Local validation]
        PROD_DEPLOY[ğŸš€ Production Deployment<br/>ğŸ“¦ Container-based<br/>â˜ï¸ Cloud infrastructure<br/>ğŸ“Š Monitoring integration]
    end

    %% Business Intelligence
    subgraph "ğŸ“Š Business Intelligence"
        BI_TOOLS[ğŸ“ˆ BI Tools<br/>ğŸ“Š Tableau/PowerBI<br/>ğŸ“‹ Executive dashboards<br/>ğŸ’¼ Investment analysis]
        API_ACCESS[ğŸ”Œ API Access<br/>ğŸ“Š REST endpoints<br/>ğŸ” Query interface<br/>ğŸ“± Application integration]
    end

    %% Data Flow
    EXT1 --> SCRIPT1
    EXT2 --> SCRIPT2
    EXT3 --> SCRIPT3
    
    SCRIPT1 --> LOCAL1
    SCRIPT2 --> LOCAL1
    SCRIPT3 --> LOCAL2
    
    LOCAL2 --> S3
    S3 --> RAW1
    S3 --> RAW2
    S3 --> RAW3
    
    RAW1 --> STG1
    RAW2 --> STG2
    RAW3 --> STG3
    
    STG1 --> SNAP1
    STG2 --> SNAP1
    STG3 --> SNAP2
    
    SNAP1 --> DIM2
    SNAP2 --> DIM3
    STG1 --> FACT2
    STG2 --> FACT1
    STG3 --> FACT3
    
    DIM1 --> FACT1
    DIM1 --> FACT2
    DIM1 --> FACT3
    DIM2 --> FACT1
    DIM2 --> FACT2
    DIM3 --> FACT3
    DIM4 --> FACT1
    DIM4 --> FACT2
    DIM4 --> FACT3
    
    FACT1 --> MART1
    FACT1 --> MART2
    FACT1 --> MART3
    FACT2 --> MART1
    FACT2 --> MART2
    FACT2 --> MART3
    FACT3 --> MART3
    DIM2 --> MART4
    DIM3 --> MART5
    DIM4 --> MART5

    %% Tool Integration
    DBT -.-> STG1
    DBT -.-> STG2
    DBT -.-> STG3
    DBT -.-> SNAP1
    DBT -.-> SNAP2
    DBT -.-> DIM1
    DBT -.-> DIM2
    DBT -.-> DIM3
    DBT -.-> DIM4
    DBT -.-> FACT1
    DBT -.-> FACT2
    DBT -.-> FACT3
    DBT -.-> MART1
    DBT -.-> MART2
    DBT -.-> MART3
    DBT -.-> MART4
    DBT -.-> MART5
    
    GE -.-> STG1
    GE -.-> STG2
    GE -.-> STG3
    GE -.-> FACT1
    GE -.-> FACT2
    GE -.-> MART1
    
    ASSETS -.-> DBT
    CHECKS -.-> GE
    JOBS -.-> ASSETS
    SCHEDULE -.-> JOBS
    
    %% Monitoring Integration
    DAGSTER_UI -.-> ASSETS
    DAGSTER_UI -.-> CHECKS
    DAGSTER_UI -.-> JOBS
    DBT_DOCS -.-> DBT
    GE_DOCS -.-> GE
    
    %% Development Flow
    GITHUB -.-> LOCAL_DEV
    LOCAL_DEV -.-> GITHUB
    GITHUB -.-> PROD_DEPLOY
    GITHUB -.-> S3
    
    %% Business Access
    MART1 --> BI_TOOLS
    MART2 --> BI_TOOLS
    MART3 --> BI_TOOLS
    MART4 --> BI_TOOLS
    MART5 --> BI_TOOLS
    
    MART1 --> API_ACCESS
    MART2 --> API_ACCESS
    MART3 --> API_ACCESS

    %% Styling
    classDef external fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    classDef processing fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef storage fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef warehouse fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef tooling fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef orchestration fill:#fff8e1,stroke:#ffa000,stroke-width:2px
    classDef monitoring fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    classDef deployment fill:#efebe9,stroke:#5d4037,stroke-width:2px
    classDef business fill:#e0f2f1,stroke:#00695c,stroke-width:2px

    class EXT1,EXT2,EXT3 external
    class SCRIPT1,SCRIPT2,SCRIPT3 processing
    class LOCAL1,LOCAL2,S3,IAM storage
    class RAW1,RAW2,RAW3,STG1,STG2,STG3,SNAP1,SNAP2,DIM1,DIM2,DIM3,DIM4,FACT1,FACT2,FACT3,MART1,MART2,MART3,MART4,MART5 warehouse
    class DBT,GE tooling
    class ASSETS,CHECKS,JOBS,SCHEDULE orchestration
    class DAGSTER_UI,DBT_DOCS,GE_DOCS monitoring
    class GITHUB,LOCAL_DEV,PROD_DEPLOY deployment
    class BI_TOOLS,API_ACCESS business