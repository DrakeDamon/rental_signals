---
title: Tampa Rent Signals - Database Schema (Star Schema)
---
erDiagram
    %% Core Dimensions
    DIM_TIME {
        INT TIME_KEY PK
        DATE MONTH_DATE UK
        INT YEAR
        INT QUARTER  
        INT MONTH_NUMBER
        VARCHAR MONTH_NAME
        VARCHAR QUARTER_NAME
        BOOLEAN IS_CURRENT_MONTH
        BOOLEAN IS_CURRENT_QUARTER
        DATE CREATED_AT
        DATE UPDATED_AT
    }

    DIM_LOCATION {
        INT LOCATION_KEY PK
        VARCHAR LOCATION_BUSINESS_KEY UK
        VARCHAR LOCATION_FIPS_CODE
        INT REGION_ID
        VARCHAR LOCATION_NAME
        VARCHAR LOCATION_TYPE
        VARCHAR STATE_NAME
        VARCHAR COUNTY_NAME
        VARCHAR METRO_NAME
        INT POPULATION
        VARCHAR MARKET_SIZE_CATEGORY
        DATE EFFECTIVE_DATE
        DATE END_DATE
        BOOLEAN IS_CURRENT
        VARCHAR LOCATION_CONTENT_HASH
        DATE DBT_VALID_FROM
        DATE DBT_VALID_TO
    }

    DIM_ECONOMIC_SERIES {
        INT SERIES_KEY PK
        VARCHAR SERIES_BUSINESS_KEY UK
        VARCHAR SERIES_ID
        VARCHAR SERIES_LABEL
        VARCHAR CATEGORY
        VARCHAR SUBCATEGORY
        VARCHAR FREQUENCY
        VARCHAR SEASONAL_ADJUSTMENT
        VARCHAR UNITS
        DATE EFFECTIVE_DATE
        DATE END_DATE
        BOOLEAN IS_CURRENT
        VARCHAR SERIES_CONTENT_HASH
        DATE DBT_VALID_FROM
        DATE DBT_VALID_TO
    }

    DIM_DATA_SOURCE {
        INT SOURCE_KEY PK
        VARCHAR SOURCE_NAME UK
        VARCHAR SOURCE_SYSTEM
        VARCHAR DATA_TYPE
        VARCHAR UPDATE_FREQUENCY
        INT RELIABILITY_SCORE
        VARCHAR CONTACT_INFO
        VARCHAR DOCUMENTATION_URL
        DATE CREATED_AT
        DATE UPDATED_AT
    }

    %% Fact Tables
    FACT_RENT_ZORI {
        INT TIME_KEY FK
        INT LOCATION_KEY FK
        INT SOURCE_KEY FK
        INT REGIONID
        DATE MONTH_DATE
        DECIMAL ZORI_VALUE
        INT SIZE_RANK
        DECIMAL YOY_CHANGE
        DECIMAL YOY_PCT_CHANGE
        DECIMAL MOM_CHANGE
        DECIMAL MOM_PCT_CHANGE
        VARCHAR GROWTH_CATEGORY
        INT NATIONAL_RANK
        DECIMAL NATIONAL_PERCENTILE
        INT INVESTMENT_ATTRACTIVENESS_SCORE
        INT DATA_QUALITY_SCORE
        BOOLEAN HAS_ANOMALY
        DATE CREATED_AT
        DATE UPDATED_AT
    }

    FACT_RENT_APTLIST {
        INT TIME_KEY FK
        INT LOCATION_KEY FK
        INT SOURCE_KEY FK
        VARCHAR LOCATION_FIPS_CODE
        DATE MONTH_DATE
        DECIMAL RENT_INDEX
        INT POPULATION
        DECIMAL YOY_CHANGE
        DECIMAL YOY_PCT_CHANGE
        DECIMAL MOM_CHANGE
        DECIMAL MOM_PCT_CHANGE
        VARCHAR MARKET_CLASSIFICATION
        VARCHAR AFFORDABILITY_CATEGORY
        INT DATA_QUALITY_SCORE
        BOOLEAN HAS_ANOMALY
        DATE CREATED_AT
        DATE UPDATED_AT
    }

    FACT_ECONOMIC_INDICATOR {
        INT TIME_KEY FK
        INT SERIES_KEY FK
        INT SOURCE_KEY FK
        VARCHAR SERIES_ID
        DATE MONTH_DATE
        DECIMAL INDICATOR_VALUE
        DECIMAL YOY_CHANGE
        DECIMAL YOY_PCT_CHANGE
        DECIMAL MOM_CHANGE
        DECIMAL MOM_PCT_CHANGE
        VARCHAR TREND_DIRECTION
        BOOLEAN IS_REVISED
        INT DATA_QUALITY_SCORE
        DATE CREATED_AT
        DATE UPDATED_AT
    }

    %% Mart Tables (Gold Layer)
    MART_RENT_TRENDS {
        VARCHAR LOCATION_NAME
        VARCHAR STATE_NAME
        DATE MONTH_DATE
        INT YEAR
        INT QUARTER
        VARCHAR DATA_SOURCE
        DECIMAL RENT_VALUE
        DECIMAL YOY_PCT_CHANGE
        DECIMAL MOM_PCT_CHANGE
        VARCHAR MARKET_TEMPERATURE
        VARCHAR AFFORDABILITY_CATEGORY
        VARCHAR GROWTH_CATEGORY
        INT INVESTMENT_ATTRACTIVENESS_SCORE
        VARCHAR RISK_ASSESSMENT
        VARCHAR INVESTMENT_RECOMMENDATION
        INT DATA_QUALITY_SCORE
        DATE CREATED_AT
    }

    MART_MARKET_RANKINGS {
        VARCHAR LOCATION_NAME
        VARCHAR STATE_NAME
        VARCHAR MARKET_SIZE_CATEGORY
        INT MARKET_HEAT_SCORE
        VARCHAR MARKET_CLASSIFICATION
        INT COMPETITIVENESS_RANK
        DECIMAL GROWTH_MOMENTUM
        VARCHAR INVESTMENT_RECOMMENDATION
        VARCHAR RISK_ASSESSMENT
        DECIMAL MARKET_STABILITY_INDEX
        DATE AS_OF_DATE
        DATE CREATED_AT
    }

    MART_ECONOMIC_CORRELATION {
        INT YEAR
        INT QUARTER
        DATE PERIOD_START
        DATE PERIOD_END
        VARCHAR ECONOMIC_REGIME
        DECIMAL RENT_CPI_CORRELATION
        DECIMAL AFFORDABILITY_PRESSURE
        DECIMAL RENT_HOUSING_CPI_SPREAD
        VARCHAR POLICY_IMPLICATIONS
        VARCHAR LEADING_INDICATOR
        DATE CREATED_AT
    }

    MART_REGIONAL_SUMMARY {
        VARCHAR STATE_NAME
        VARCHAR REGION_NAME
        INT METRO_COUNT
        DECIMAL AVG_RENT_INDEX
        DECIMAL WEIGHTED_YOY_GROWTH
        VARCHAR DOMINANT_TREND
        INT TOTAL_POPULATION
        DECIMAL MARKET_CONCENTRATION
        VARCHAR ECONOMIC_DIVERSITY
        VARCHAR POLICY_CLIMATE
        DATE AS_OF_DATE
        DATE CREATED_AT
    }

    MART_DATA_LINEAGE {
        VARCHAR TABLE_NAME
        VARCHAR LAYER
        VARCHAR SOURCE_NAME
        VARCHAR DATA_FRESHNESS_STATUS
        VARCHAR DATA_QUALITY_STATUS
        INT OVERALL_RELIABILITY_SCORE
        INT DAYS_SINCE_LATEST_DATA
        INT VALIDATION_PASS_RATE
        INT ROW_COUNT
        DATE LAST_UPDATED
        DATE CREATED_AT
    }

    %% SCD Type 2 Snapshot Tables
    SNAP_LOCATION {
        VARCHAR LOCATION_BUSINESS_KEY
        VARCHAR LOCATION_FIPS_CODE
        INT REGIONID
        VARCHAR LOCATION_NAME
        VARCHAR LOCATION_TYPE
        VARCHAR STATE_NAME
        VARCHAR COUNTY_NAME
        VARCHAR METRO_NAME
        INT POPULATION
        VARCHAR MARKET_SIZE_CATEGORY
        VARCHAR LOCATION_CONTENT_HASH
        DATE DBT_SCD_ID
        DATE DBT_UPDATED_AT
        DATE DBT_VALID_FROM
        DATE DBT_VALID_TO
    }

    SNAP_ECONOMIC_SERIES {
        VARCHAR SERIES_BUSINESS_KEY
        VARCHAR SERIES_ID
        VARCHAR SERIES_LABEL
        VARCHAR CATEGORY
        VARCHAR SUBCATEGORY
        VARCHAR FREQUENCY
        VARCHAR SEASONAL_ADJUSTMENT
        VARCHAR UNITS
        INT RELIABILITY_SCORE
        VARCHAR SERIES_CONTENT_HASH
        DATE DBT_SCD_ID
        DATE DBT_UPDATED_AT
        DATE DBT_VALID_FROM
        DATE DBT_VALID_TO
    }

    %% Relationships
    DIM_TIME ||--o{ FACT_RENT_ZORI : "time_key"
    DIM_TIME ||--o{ FACT_RENT_APTLIST : "time_key"
    DIM_TIME ||--o{ FACT_ECONOMIC_INDICATOR : "time_key"
    
    DIM_LOCATION ||--o{ FACT_RENT_ZORI : "location_key"
    DIM_LOCATION ||--o{ FACT_RENT_APTLIST : "location_key"
    
    DIM_ECONOMIC_SERIES ||--o{ FACT_ECONOMIC_INDICATOR : "series_key"
    
    DIM_DATA_SOURCE ||--o{ FACT_RENT_ZORI : "source_key"
    DIM_DATA_SOURCE ||--o{ FACT_RENT_APTLIST : "source_key"
    DIM_DATA_SOURCE ||--o{ FACT_ECONOMIC_INDICATOR : "source_key"
    
    SNAP_LOCATION ||--|| DIM_LOCATION : "derives_from"
    SNAP_ECONOMIC_SERIES ||--|| DIM_ECONOMIC_SERIES : "derives_from"

    %% Styling
    classDef dimensionTable fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef factTable fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef martTable fill:#fff8e1,stroke:#ff6f00,stroke-width:2px
    classDef snapshotTable fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px

    class DIM_TIME,DIM_LOCATION,DIM_ECONOMIC_SERIES,DIM_DATA_SOURCE dimensionTable
    class FACT_RENT_ZORI,FACT_RENT_APTLIST,FACT_ECONOMIC_INDICATOR factTable
    class MART_RENT_TRENDS,MART_MARKET_RANKINGS,MART_ECONOMIC_CORRELATION,MART_REGIONAL_SUMMARY,MART_DATA_LINEAGE martTable
    class SNAP_LOCATION,SNAP_ECONOMIC_SERIES snapshotTable